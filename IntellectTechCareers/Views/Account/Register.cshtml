@model IntellectTechCareers.Models.RegisterModel

@{
    ViewBag.Title = "Register";
}

@section Scripts {

    @Scripts.Render("~/bundles/jqueryval")
    <link href="~/Content/themes/base/minified/jquery-ui.min.css" rel="stylesheet" />
    
    @Scripts.Render("~/Scripts/jquery-1.8.2.min.js")
    @Scripts.Render("~/Scripts/jquery-ui-1.8.24.min.js")
}

<script type="text/javascript">

    var user_name_valid = "null";

    function validate_user_name()
    {
        if (user_name_valid === "null") {
            document.getElementById('notification').innerHTML = "<h3><font color='red'>Please check if user name is available</font></h3>";
            return false;
        }
        else if (user_name_valid === "true")
        {
            document.getElementById('notification').innerHTML = "";
            return true;
        }
        else {
            document.getElementById('notification').innerHTML = "<h3><font color='red'>Entered user name is not available</font></h3>";
            return false;
        }
    }

    function check_user_name_avail()
    {
        var user_name = document.getElementById('UserName').value;
    
        var model = { "UserName": user_name };
        var url = '@Url.Action("CheckUserNameAvailibility", "Account")'

        $.ajax({
            type: "POST",
            url: url,
            data: model,
            success: function (obj) {

                if (obj == 'true') {
                    document.getElementById('yes').style.display = "inline";
                    document.getElementById('no').style.display = "none";
                    user_name_valid = "true";
                }
                else
                {
                    document.getElementById('yes').style.display = "none";
                    document.getElementById('no').style.display = "inline";
                    user_name_valid = "false";
                }
            }
        });
    }


</script>

<hgroup class="title">
    @*<h1>@ViewBag.Title.</h1>*@
    <h2>Create a new account.</h2>
</hgroup>

@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()

    <fieldset>
        <legend>Registration Form</legend>
        <h2>Account details</h2>
        <ol>
            <li>
                <div>
                    @Html.LabelFor(m => m.UserName)
                    @Html.TextBoxFor(m => m.UserName)
                    @Html.ValidationMessageFor(m => m.UserName)                
                    &nbsp; <input type="button" onclick="check_user_name_avail()" value="Check availability"/>

                    <img id="yes" src="~/Images/yes.png" height="25" width="25" style="padding-top:10px;display:none;"/>
                    <img id="no" src="~/Images/no.gif" height="25" width="25" style="padding-top:10px;display:none;"/>
                </div>
            </li>
            <li>
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)                
            </li>
            <li>
                @Html.LabelFor(m => m.ConfirmPassword)
                @Html.PasswordFor(m => m.ConfirmPassword)
                @Html.ValidationMessageFor(m => m.ConfirmPassword)                
            </li>
        </ol>

        <h2>Personal details</h2>
        <ol>
            <li>
                @Html.LabelFor(m => m.Name)
                @Html.TextBoxFor(m => m.Name)
                @Html.ValidationMessageFor(m => m.Name)                
            </li>
            <li>
                @Html.LabelFor(m => m.EmailID)
                @Html.TextBoxFor(m => m.EmailID)
                @Html.ValidationMessageFor(m => m.EmailID)                
            </li>
            <li>
                @Html.LabelFor(m => m.ContactNo)
                @Html.TextBoxFor(m => m.ContactNo)
                @Html.ValidationMessageFor(m => m.ContactNo)
            </li>
            <li>
                @Html.LabelFor(m => m.gender)
                @Html.RadioButtonFor(m => m.gender,"male", new { @checked = "checked" }) Male
                @Html.RadioButtonFor(m => m.gender,"female") Female
            </li>
            <li>
                @Html.LabelFor(m => m.dob)
                @Html.TextBoxFor(model => model.dob, new { type = "date" })
                @Html.ValidationMessageFor(m => m.dob)
            </li>
            <li>
                @Html.LabelFor(m => m.Address)
                @Html.TextAreaFor(m => m.Address)
                @Html.ValidationMessageFor(m => m.Address)
            </li>
        </ol>
        <input type="submit" onclick="return validate_user_name()" value="Sign up" />

    </fieldset>
    <div id="notification"></div>
    
    <script type="text/javascript">
        $(function () { // will trigger when the document is ready
            $('.datepicker').datepicker({ defaultDate: '01/01/90' }); //Initialise any date pickers
        });
    </script>
}

